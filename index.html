<!DOCTYPE HTML>
<html lang="en">
<html>
  <head>
    <meta charset="utf-8" />
    <title>Wator</title>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <link rel="stylesheet" href="bootstrap/jquery.bootstrap-touchspin.css">
      <link rel="stylesheet" href="wator.css">
      <link rel="stylesheet" type="text/css" href="bootstrap/bootstrap-xlgrid.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
      <script src="https://d3js.org/d3.v4.min.js"></script>
      <script src="bootstrap/jquery.bootstrap-touchspin.js"></script>
      <script src="http://www.virtuosoft.eu/code/bootstrap-touchspin/bootstrap-touchspin/v2.3.0/bootstrap.touchspin.js"></script>

      <link rel="stylesheet" type="text/css" href="wator.css">
    	<script type="text/javascript" src="wator.js"></script>
    	<script type="text/javascript" src="fish.js"></script>
    	<script type="text/javascript" src="vec2.js"></script>
      <script type="text/javascript" src="simulation.js"></script>
      <script type="text/javascript" src="plot.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">

        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-8">
          <div id=margin_adjust>
            <div id="container_canvas" class="container_wrapper">
              <canvas id="canvas"></canvas>
            </div>
          </div>
        </div>

        <div class="col-sm-12 col-md-6 col-lg-6 col-xl-4">
          <div id="container_graph" class="container_wrapper text_wrapper">
            <h4>Populations</h4>
            <div id="graph"></div>
          </div>
        </div>

        <div class="col-sm-12 col-md-6 col-lg-6 col-xl-4">
          <div id="container_controls" class="container_wrapper text_wrapper">
            <h4>Controls</h4>

            <div id="modes">
              <label id="modelabel">Simulation Mode: </label>
              <div class="btn-group" data-toggle="buttons" id="modesgroup">
                <label class="btn btn-primary active" id="ContinuousWator">
                  <input type="radio" name="simulationMode" value="1" autocomplete="off" checked> Continuous
                </label>
                <label class="btn btn-primary" id="ClassicWator">
                  <input type="radio" name="simulationMode" value="2" autocomplete="off"> Classic
                </label>
                <label class="btn btn-primary" id="PetWator">
                  <input type="radio" name="simulationMode" value="3" autocomplete="off"> Pet
                </label>
              </div>
            </div>

            <div class="form-group params visible" id="continuous-controls">
              <div class="col-sm-6 col-md-6">
                <label for="NFISH">Number of fishes:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="600" data-initval="200" data-step="10" name="NFISH">
                <label for="FISHSPAWN">Timesteps until fishes spawn:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="50" data-initval="10" data-step="1" name="FISHSPAWN">
                <label for="FISHAGE">Timesteps until fishes die:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="100" data-initval="30" data-step="1" name="FISHAGE">
              </div>
              <div class="col-sm-6 col-md-6">
                <label for="NSHARK">Number of sharks:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="100" data-initval="20" data-step="5" name="NSHARK">
                <label for="SHARKSPAWN">Timesteps until sharks spawn:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="50" data-initval="10" data-step="1" name="SHARKSPAWN">
                <label for="SHARKSTARVE">Timesteps until sharks starve:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="50" data-initval="6" data-step="1" name="SHARKSTARVE">
              </div>
            </div>

            <div class="form-group params" id="classic-controls">
              <div class="col-sm-6 col-md-6">
                <label for="NCELLS">Number of cells:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="100" data-min-value="1" data-initval="20" data-step="1" name="NCELLS">
                <label for="NFISH">Number of fishes:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="250" data-initval="150" data-step="10" name="NFISH">
                <label for="FISHSPAWN">Timesteps until fishes spawn:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="50" data-initval="10" data-step="1" name="FISHSPAWN">
              </div>
              <div class="col-sm-6 col-md-6">
                <label for="NSHARK">Number of sharks:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="150" data-initval="20" data-step="5" name="NSHARK">
                <label for="SHARKSPAWN">Timesteps until sharks spawn:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="50" data-initval="20" data-step="1" name="SHARKSPAWN">
                <label for="SHARKSTARVE">Timesteps until sharks starve:</label>
                <input type="text" class="form-control touchspin input-sm" data-max-value="50" data-initval="10" data-step="1" name="SHARKSTARVE">
              </div>
            </div>

            <div class="form-group params" id="pet-controls">
              <div class="col-sm-6 col-md-6">
              </div>
              <div class="col-sm-6 col-md-6">
              </div>
            </div>

            <div class="col-sm-12"></br></div>
            <button id="reset_params" type="button" class="btn btn-primary">Reset parameters</button>
            <button id="reset_button" type="button" class="btn btn-primary">Apply</button>
            <button id="play_pause_button" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-pause" aria-hidden="true"></span></button>
          </div>
        </div>

        <script>
        $("#ContinuousWator").click(function (){
          $("#classic-controls").removeClass("visible");
          $("#pet-controls").removeClass("visible");
          $("#continuous-controls").addClass("visible");
        })

        $("#ClassicWator").click(function (){
          $("#continuous-controls").removeClass("visible");
          $("#pet-controls").removeClass("visible");
          $("#classic-controls").addClass("visible");
        })

        $("#PetWator").click(function (){
          $("#continuous-controls").removeClass("visible");
          $("#classic-controls").removeClass("visible");
          $("#pet-controls").addClass("visible");
        })

        $("#play_pause_button").click(function (){
          var that = $("#play_pause_button .glyphicon");
          if(that.hasClass("glyphicon-play")){
            that.removeClass("glyphicon-play");
            that.addClass("glyphicon-pause");
          } else {
            that.removeClass("glyphicon-pause");
            that.addClass("glyphicon-play");
          }
        })

        $.each($('.touchspin'), function() {
          var maxValue = $(this).data('max-value');
          var val = $(this).data('initval');
          var step = $(this).data('step');
          $(this).TouchSpin({
            initval: val,
            min: 0,
            max: maxValue ? maxValue : 1,
            step: step
          });
        });

        $( "#reset_params" ).on("click",function(){
          $.each($('.visible .touchspin'), function() {
            var val = $(this).data('initval');
            $(this).val(val);
          })
        });
        </script>

        <div class="clearfix visible-lg"></div>
        <div class="col-sm-12 col-md-6 col-lg-6 col-xl-4">
          <div id="container_about" class="container_wrapper text_wrapper">
            <h4>About Wator</h4>

            <p>
            The balance of this ecosystem is very delicate: the populations of two species can follow hugely different cycles depending on the given parameters (such as reproduction cycles and the time period in which a shark must eat to avoid starvation) as well as starting positions of each being. We may go from both species being endangered to an abundance of one or both.
            <br><br>
            When the prey are numerous, predators can reproduce rapidly. But this increase in turn increases the number of prey hunted and the population of the prey decreases. By becoming rarer prey, predators begin to starve and die of starvation, decreasing their population and easing the pressure on hunting prey. The prey (and in time predator) can then go back to rapidly reproducing as the cycle repeats itself.
            </p>
            <a id="documentation_link" href="latex/wator.pdf">Documentation</a>
          </div>
        </div>

        <div id="container_end" class="col-sm-12 col-md-12 col-lg-12 col-xl-12"></div>
      </div>
    </div>
  </body>
</html>
